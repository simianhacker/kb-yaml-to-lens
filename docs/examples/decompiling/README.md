# Dashboard Decompiling Examples

This directory contains before/after examples of converting Kibana JSON panels to YAML format.

## Simple Metric Panel

A basic example showing the conversion of a single metric panel from Kibana's JSON format to the YAML schema.

### Before: Kibana JSON

File: `simple-metric-panel.json`

This is a typical Lens metric panel as exported from Kibana, showing:

- Panel metadata (title, description)
- Grid positioning
- Lens visualization configuration
- Data source (formBased datasource)
- Index pattern reference

### After: YAML Format

File: `simple-metric-panel.yaml`

The converted YAML representation is much more concise:

- Only the essential fields are included
- Default values are omitted
- Human-friendly structure
- Easy to read and modify

### Conversion Notes

**What was simplified:**

1. **Removed internal IDs** - Layer IDs, column IDs are generated by the compiler
2. **Omitted defaults** - Fields like `dataType`, `scale`, `isBucketed` have defaults
3. **Simplified structure** - No need for nested `embeddableConfig.attributes.state`
4. **Cleaner references** - Just specify `data_view: logs-*` instead of full reference objects

**Key differences:**

| Kibana JSON | YAML Equivalent |
| ----------- | --------------- |
| `embeddableConfig.attributes.title` | `title` |
| `embeddableConfig.attributes.visualizationType: "lnsMetric"` | `lens.type: metric` |
| Complex datasource state with layers/columns | `lens.metrics` array |
| References array with index pattern | `lens.data_view` |

## Using These Examples

These examples can help you understand the conversion process when using the [Dashboard Decompiling Guide](../../dashboard-decompiling-guide.md).

**Typical workflow:**

1. Disassemble your dashboard: `kb-dashboard disassemble dashboard.ndjson -o parts/`
2. Find a panel JSON file in `parts/panels/`
3. Compare with `simple-metric-panel.json`
4. Convert to YAML using the pattern from `simple-metric-panel.yaml`
5. Compile to verify: `kb-dashboard compile`

## Next Steps

For more complex examples and the complete decompilation workflow, see:

- [Dashboard Decompiling Guide](../../dashboard-decompiling-guide.md) - Complete guide to converting dashboards
- [Metric Charts Documentation](../../panels/metric.md) - Full metric panel schema
- [Complete Examples](../index.md) - More YAML dashboard examples
